import Tile from"./Tile";import{threeWords}from"./3-letter-words.min";export default{guessesAllowed:5,theWord:threeWords[Math.floor(Math.random()*threeWords.length)].toLowerCase(),currentRowIndex:0,state:"active",errors:!1,message:"",letters:["QWERTYUIOP".split(""),"ASDFGHJKL".split(""),["Delete",..."ZXCVBNM".split(""),"Enter"]],get currentRow(){return this.board[this.currentRowIndex]},get currentGuess(){return this.currentRow.map(e=>e.letter).join("")},get remainingGuesses(){return this.guessesAllowed-this.currentRowIndex-1},init(){this.board=Array.from({length:this.guessesAllowed},()=>Array.from({length:this.theWord.length},(e,t)=>new Tile(t)))},onKeyPress(e){this.message="",this.errors=!1,/^[A-z]$/.test(e)?this.fillTile(e):"Backspace"===e||"Delete"===e?this.emptyTile():"Enter"===e&&this.submitGuess()},fillTile(e){for(let t of this.currentRow)if(!t.letter){t.fill(e);break}},emptyTile(){for(let e of[...this.currentRow].reverse())if(e.letter){e.empty();break}},submitGuess(){if(!(this.currentGuess.length<this.theWord.length)){if(!threeWords.includes(this.currentGuess.toUpperCase()))return this.errors=!0,void(this.message="Invalid word...");if(Tile.updateStatusesForRow(this.currentRow,this.theWord),this.currentGuess===this.theWord){this.state="complete",this.message="You Win!";var e=200,t={origin:{y:.7}};function r(r,s){confetti(Object.assign({},t,s,{particleCount:Math.floor(e*r)}))}r(.25,{spread:26,startVelocity:55}),r(.2,{spread:60}),r(.35,{spread:100,decay:.91,scalar:.8}),r(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),r(.1,{spread:120,startVelocity:45})}else 0===this.remainingGuesses?(this.state="complete",this.message=`Game Over. You Lose. The word was ${this.theWord.toUpperCase()}`):this.currentRowIndex++}},matchingTileForKey(e){return this.board.flat().filter(e=>e.status).sort((e,t)=>"correct"===t.status).find(t=>t.letter===e.toLowerCase())}};